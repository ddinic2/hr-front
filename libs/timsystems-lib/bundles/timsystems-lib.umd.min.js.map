{"version":3,"sources":["ng://timsystems-lib/lib/timsystems-lib.service.ts","ng://timsystems-lib/lib/timsystems-lib.component.ts","ng://timsystems-lib/lib/tims-grid/tims-grid.component.ts","ng://timsystems-lib/lib/tims-grid/general.pipe.ts","ng://timsystems-lib/lib/tims-grid/button-config.ts","ng://timsystems-lib/lib/tims-grid/grid.service.ts","ng://timsystems-lib/lib/tims-grid/button/button.component.ts","ng://timsystems-lib/lib/tims-grid/tims-grid.module.ts","ng://timsystems-lib/lib/timsystems-lib.module.ts"],"names":["TimsystemsLibService","http","_this","this","sort","order","page","requestUrl","href","get","Injectable","args","providedIn","HttpClient","TimsystemsLibComponent","prototype","ngOnInit","Component","selector","template","styles","lod","_","TimsGridComponent","source","fieldPath","buttons","length","columnIds","push","sortChange","subscribe","paginator","pageIndex","merge","pipe","startWith","switchMap","isLoadingResults","dataProvider","active","direction","pageSize","map","data","isRateLimitReached","resultsLength","total_count","console","log","items","catchError","observableOf","elementToDelete","filter","elem","clickedElement","expandedElement","refresh","animations","trigger","state","style","height","minHeight","display","transition","animate","ViewChild","MatPaginator","MatSort","Input","GeneralPipe","transform","value","isArray","forEach","Pipe","name","GridConfigService","InjectionToken","GridService","config","Inject","ButtonComponent","gridServ","targetElement","event","buttonAction","stopPropagation","buttonType","buttonDef","TimsGridModule","setConfig","ngModule","providers","provide","useValue","NgModule","imports","CommonModule","AngularFontAwesomeModule","CdkTableModule","MatTableModule","MatPaginatorModule","BrowserAnimationsModule","MatTooltipModule","FormsModule","ReactiveFormsModule","HttpClientModule","MatCardModule","MatProgressSpinnerModule","MatMenuModule","MatIconModule","MatToolbarModule","MatButtonModule","MatFormFieldModule","MatInputModule","MatSelectModule","MatSortModule","declarations","exports","TimsystemsLibModule"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TimsystemsLibService {\n  constructor(private http: HttpClient) {}\n\n  getRepoIssues = (\n    sort: string,\n    order: string,\n    page: number\n  ): Observable<GithubApi> => {\n    const href = 'https://api.github.com/search/issues';\n    const requestUrl = `${href}?q=repo:angular/material2&sort=${sort}&order=${order}&page=${page +\n      1}`;\n\n    return this.http.get<GithubApi>(requestUrl);\n  }\n}\nexport interface GithubApi {\n  items: GithubIssue[];\n  total_count: number;\n}\n\nexport interface GithubIssue {\n  created_at: string;\n  number: string;\n  state: string;\n  title: string;\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'tims-timsystems-lib',\n  template: `\n    <p>\n      timsystems-lib works!\n    </p>\n  `,\n  styles: []\n})\nexport class TimsystemsLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit, ViewChild, Input, PipeTransform } from '@angular/core';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport { MatPaginator, MatSort } from '@angular/material';\nimport { merge, Observable, of as observableOf } from 'rxjs';\nimport { catchError, map, startWith, switchMap } from 'rxjs/operators';\nimport * as _ from 'lodash';\n\nconst lod = _;\n@Component({\n  selector: 'tims-tims-grid',\n  template: `<div class=\"example-container mat-elevation-z8\">\n  <div class=\"example-loading-shade\" *ngIf=\"isLoadingResults || isRateLimitReached\">\n    <mat-spinner *ngIf=\"isLoadingResults\"></mat-spinner>\n    <div class=\"example-rate-limit-reached\" *ngIf=\"isRateLimitReached\">\n      DoÅ¡lo je do greÅ¡ke, molimo proverite vaÅ¡u internet konekciju\n    </div>\n  </div>\n\n  <div class=\"example-table-container\">\n\n    <table mat-table [dataSource]=\"data\" class=\"example-table\" matSort multiTemplateDataRows matSortDisableClear\n      matSortDirection=\"asc\">\n\n\n      <ng-container matColumnDef=\"{{column}}\" *ngFor=\"let column of columnIds; let id=index\">\n        <ng-container *ngIf=\"sortable;else nosort\">\n          <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear> {{columnNames[id]}} </th>\n        </ng-container>\n        <ng-template #nosort>\n          <th mat-header-cell *matHeaderCellDef> {{columnNames[id]}} </th>\n        </ng-template>\n        <ng-container *ngIf=\"column!=='buttons';else test\">\n          <td mat-cell *matCellDef=\"let row\"> <span>{{getField(row,column)|general:columnPipes[id]}}</span></td>\n        </ng-container>\n        <ng-template #test>\n          <td mat-cell *matCellDef=\"let row\">\n            <div class=\"buttons-panel\" [ngStyle]=\"{'width': (buttons.length*20)+'px'}\">\n              <ng-container *ngFor=\"let button of buttons;let i=index\">\n                <tims-button [buttonAction]=\"button!=='delete'? buttonActions[i]: removeElement\" [targetElement]=\"row\"\n                  [buttonType]=\"button\"></tims-button>\n              </ng-container>\n            </div>\n          </td>\n        </ng-template>\n      </ng-container>\n\n      <ng-container matColumnDef=\"expandedDetail\">\n        <td mat-cell *matCellDef=\"let row\" [attr.colspan]=\"columnIds.length\">\n          <div class=\"example-element-detail\" [@detailExpand]=\"row == expandedElement ? 'expanded' : 'collapsed'\">\n            <!-- <div class=\"example-element-diagram\"> -->\n            <!-- <div class=\"example-element-position\"> {{row.body}} </div> -->\n            <!-- <div class=\"example-element-symbol\"> nesto </div>\n              <!-- <div class=\"example-element-name\"> nesto </div> -->\n            <!-- <div class=\"example-element-weight\"> {{row.body}} </div> -->\n            <!-- </div> -->\n            <div class=\"example-element-description\">\n              {{row.body}}\n              <span class=\"example-element-description-attribution\"> -- Izvor neki </span>\n            </div>\n          </div>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef=\"columnIds\"></tr>\n      <tr mat-row *matRowDef=\"let row; columns: columnIds;\" class=\"example-element-row\" [class.example-expanded-row]=\"expandedElement === row\"\n        (click)=\"toggleExpand(row)\">\n      </tr>\n      <ng-container *ngIf=\"displayDetails\">\n        <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"example-detail-row\"></tr>\n      </ng-container>\n    </table>\n  </div>\n\n  <mat-paginator [length]=\"resultsLength\" [pageSizeOptions]=\"[10, 20, 50, 100]\" [pageSize]=\"20\"></mat-paginator>\n</div>\n`,\n  styles: [`table{width:100%}tr.example-detail-row{height:0}.buttons-panel{display:inline-flex;flex-direction:row}tr.example-element-row:not(.example-expanded-row):hover{background:#f5f5f5}tr.example-element-row:not(.example-expanded-row):active{background:#efefef}.example-element-row td{border-bottom-width:0}.example-element-detail{overflow:hidden;display:flex}.example-element-diagram{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol{font-weight:700;font-size:40px;line-height:normal}.example-element-description{padding:16px}.example-element-description-attribution{opacity:.5}.example-container{position:relative;width:100%}.example-loading-shade{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached{color:#980000;max-width:360px;text-align:center}`],\n  animations: [\n    trigger('detailExpand', [\n      state('collapsed', style({ height: '0px', minHeight: '0', display: 'none' })),\n      state('expanded', style({ height: '*' })),\n      transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),\n    ]),\n  ],\n})\nexport class TimsGridComponent implements OnInit {\n  @ViewChild(MatPaginator)\n  paginator: MatPaginator;\n\n  @ViewChild(MatSort)\n  sort: MatSort;\n\n  @Input()\n  sortable: boolean;\n\n  @Input()\n  dataProvider: Function;\n\n  @Input()\n  columnIds: string[];\n\n  @Input()\n  columnNames: string[];\n\n  @Input()\n  columnPipes: PipeTransform[];\n\n  @Input()\n  buttons: string[];\n\n  @Input()\n  buttonActions: Function[];\n\n  @Input()\n  displayDetails = false;\n\n  resultsLength = 0;\n  isLoadingResults = true;\n  isRateLimitReached = false;\n  expandedElement: any;\n  data: any[];\n  constructor() {}\n\n  getField = (source, fieldPath: string) => lod.get(source, fieldPath, '');\n\n  ngOnInit() {\n    this.refresh();\n  }\n\n  refresh = () => {\n    if (this.buttons && this.buttons.length > 0) {\n      this.columnIds.push('buttons');\n    }\n    // If the user changes the sort order, reset back to the first page.\n    this.sort.sortChange.subscribe(() => (this.paginator.pageIndex = 0));\n\n    merge(this.sort.sortChange, this.paginator.page)\n      .pipe(\n        startWith({}),\n        switchMap(() => {\n          this.isLoadingResults = true;\n          return <Observable<any>>(\n            this.dataProvider(this.sort.active, this.sort.direction, this.paginator.pageIndex, this.paginator.pageSize)\n          );\n        }),\n        map(data => {\n          // Flip flag to show that loading has finished.\n          this.isLoadingResults = false;\n          this.isRateLimitReached = false;\n          this.resultsLength = data.total_count;\n          console.log(data);\n          return data.items;\n        }),\n        catchError(() => {\n          this.isLoadingResults = false;\n          // Catch if the GitHub API has reached its rate limit. Return empty data.\n          this.isRateLimitReached = true;\n          return observableOf([]);\n        })\n      )\n      .subscribe(data => (this.data = data));\n  }\n\n  removeElement = elementToDelete => {\n    this.data = this.data.filter(elem => elem !== elementToDelete);\n  }\n\n  toggleExpand = clickedElement =>\n    (this.expandedElement = !this.expandedElement || this.expandedElement !== clickedElement ? clickedElement : null)\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { isArray } from 'util';\n\n@Pipe({\n  name: 'general'\n})\nexport class GeneralPipe implements PipeTransform {\n  transform(value: any, args?: any): any {\n    if (!args) {\n      return value;\n    }\n    if (isArray(args)) {\n      args.forEach(pipe => {\n        value = (<PipeTransform>pipe).transform(value);\n      });\n    } else {\n      value = (<PipeTransform>args).transform(value);\n    }\n    return value;\n  }\n}\n","import { Button } from './button';\r\nimport { InjectionToken } from '@angular/core';\r\n\r\nexport interface GridConfig {\r\n  buttons: Map<string, Button>;\r\n}\r\n\r\nexport const GridConfigService = new InjectionToken<GridConfig>('GridConfig');\r\n","import { Injectable, Inject } from '@angular/core';\nimport { GridConfigService } from './button-config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GridService {\n  buttons;\n  constructor(@Inject(GridConfigService) private config) {\n    console.log('GridConfigService', config);\n    if (this.config.buttons) {\n      this.buttons = this.config.buttons;\n    }\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Button } from '../button';\nimport { GridService } from '../grid.service';\n\n@Component({\n  selector: 'tims-button',\n  template: `<div  class=\"button-container\" (click)=\"concreteButtonAction(targetElement,$event)\">\n  <fa [matTooltip]=\"buttonDef.text\" [name]=\"buttonDef.icon\" [animation]=\"buttonDef.animation\"></fa>\n</div>\n`,\n  styles: [`.button-container{cursor:pointer;color:#5454c7;margin:4px;line-height:100%;flex:1}.button-container:hover{color:orange}`],\n})\nexport class ButtonComponent implements OnInit {\n  @Input()\n  buttonType: string;\n\n  @Input()\n  targetElement;\n\n  @Input()\n  buttonAction: Function;\n\n  buttonDef: Button;\n\n  constructor(private gridServ: GridService) {}\n\n  ngOnInit() {\n    if (this.buttonType) {\n      this.buttonDef = this.gridServ.buttons.get(this.buttonType);\n    }\n  }\n\n  concreteButtonAction = (targetElement, event: MouseEvent) => {\n    if (this.buttonAction) {\n      event.stopPropagation();\n      this.buttonAction(targetElement);\n    }\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TimsGridComponent } from './tims-grid.component';\nimport { CdkTableModule } from '@angular/cdk/table';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport {\n  MatButtonModule,\n  MatCardModule,\n  MatIconModule,\n  MatInputModule,\n  MatMenuModule,\n  MatProgressSpinnerModule,\n  MatSelectModule,\n  MatSortModule,\n  MatTableModule,\n  MatToolbarModule,\n  MatFormFieldModule,\n  MatPaginatorModule,\n  MatTooltip,\n  MatTooltipModule,\n} from '@angular/material';\nimport { GeneralPipe } from './general.pipe';\nimport { ButtonComponent } from './button/button.component';\nimport { AngularFontAwesomeModule } from 'angular-font-awesome';\nimport { GridService } from './grid.service';\nimport { GridConfig, GridConfigService } from './button-config';\n\n// export const buttons: Map<string, Button> = new Map([\n//   ['edit', new Button('Izmeni', 'pencil-square-o')],\n//   ['delete', new Button('ObriÅ¡i', 'trash-o')],\n//   ['view', new Button('Detalji', 'address-card-o')],\n//   ['save', new Button('SaÄuvaj', 'floppy-o')],\n//   ['approve', new Button('Odobri', 'check')],\n//   ['deny', new Button('Odbij', 'ban')],\n//   ['generate', new Button('GeneriÅ¡i dokument', 'file-text')],\n// ]);\n\n@NgModule({\n  imports: [\n    CommonModule,\n    AngularFontAwesomeModule,\n    CdkTableModule,\n    MatTableModule,\n    MatPaginatorModule,\n    BrowserAnimationsModule,\n    MatTooltipModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    MatCardModule,\n    MatProgressSpinnerModule,\n    MatMenuModule,\n    MatIconModule,\n    MatToolbarModule,\n    MatButtonModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatSelectModule,\n    MatSortModule,\n    MatTableModule,\n    FormsModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [TimsGridComponent, GeneralPipe, ButtonComponent],\n  exports: [TimsGridComponent],\n  providers: [GridService],\n})\nexport class TimsGridModule {\n  static setConfig(config: GridConfig): ModuleWithProviders {\n    return {\n      ngModule: TimsGridModule,\n      providers: [\n        GridService,\n        {\n          provide: GridConfigService,\n          useValue: config,\n        },\n      ],\n    };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { TimsystemsLibComponent } from './timsystems-lib.component';\nimport { TimsGridModule } from './tims-grid/tims-grid.module';\n\n@NgModule({\n  imports: [TimsGridModule],\n  declarations: [TimsystemsLibComponent],\n  exports: [TimsGridModule, TimsystemsLibComponent]\n})\nexport class TimsystemsLibModule {}\n"]}