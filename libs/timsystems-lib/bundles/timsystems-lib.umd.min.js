!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/animations"),require("@angular/material"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("util"),require("@angular/common"),require("@angular/cdk/table"),require("@angular/forms"),require("@angular/platform-browser/animations"),require("angular-font-awesome")):"function"==typeof define&&define.amd?define("timsystems-lib",["exports","@angular/core","@angular/common/http","@angular/animations","@angular/material","rxjs","rxjs/operators","lodash","util","@angular/common","@angular/cdk/table","@angular/forms","@angular/platform-browser/animations","angular-font-awesome"],t):t(e["timsystems-lib"]={},e.ng.core,e.ng.common.http,e.ng.animations,e.ng.material,e.rxjs,e.rxjs.operators,null,null,e.ng.common,e.ng.cdk.table,e.ng.forms,e.ng.platformBrowser.animations,null)}(this,function(e,n,o,t,a,r,i,l,s,u,d,c,m,p){"use strict";var g=function(){function e(e){var a=this;this.http=e,this.getRepoIssues=function(e,t,n){var o="https://api.github.com/search/issues?q=repo:angular/material2&sort="+e+"&order="+t+"&page="+(n+1);return a.http.get(o)}}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.HttpClient}]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e(n.inject(o.HttpClient))},token:e,providedIn:"root"}),e}(),f=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:n.Component,args:[{selector:"tims-timsystems-lib",template:"\n    <p>\n      timsystems-lib works!\n    </p>\n  ",styles:[]}]}],e.ctorParameters=function(){return[]},e}(),h=l,b=function(){function e(){var n=this;this.displayDetails=!1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.getField=function(e,t){return h.get(e,t,"")},this.refresh=function(){n.buttons&&0<n.buttons.length&&n.columnIds.push("buttons"),n.sort.sortChange.subscribe(function(){return n.paginator.pageIndex=0}),r.merge(n.sort.sortChange,n.paginator.page).pipe(i.startWith({}),i.switchMap(function(){return n.isLoadingResults=!0,n.dataProvider(n.sort.active,n.sort.direction,n.paginator.pageIndex,n.paginator.pageSize)}),i.map(function(e){return n.isLoadingResults=!1,n.isRateLimitReached=!1,n.resultsLength=e.total_count,console.log(e),e.items}),i.catchError(function(){return n.isLoadingResults=!1,n.isRateLimitReached=!0,r.of([])})).subscribe(function(e){return n.data=e})},this.removeElement=function(t){n.data=n.data.filter(function(e){return e!==t})},this.toggleExpand=function(e){return n.expandedElement=n.expandedElement&&n.expandedElement===e?null:e}}return e.prototype.ngOnInit=function(){this.refresh()},e.decorators=[{type:n.Component,args:[{selector:"tims-tims-grid",template:'<div class="example-container mat-elevation-z8">\n  <div class="example-loading-shade" *ngIf="isLoadingResults || isRateLimitReached">\n    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>\n    <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">\n      Došlo je do greške, molimo proverite vašu internet konekciju\n    </div>\n  </div>\n\n  <div class="example-table-container">\n\n    <table mat-table [dataSource]="data" class="example-table" matSort multiTemplateDataRows matSortDisableClear\n      matSortDirection="asc">\n\n\n      <ng-container matColumnDef="{{column}}" *ngFor="let column of columnIds; let id=index">\n        <ng-container *ngIf="sortable;else nosort">\n          <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear> {{columnNames[id]}} </th>\n        </ng-container>\n        <ng-template #nosort>\n          <th mat-header-cell *matHeaderCellDef> {{columnNames[id]}} </th>\n        </ng-template>\n        <ng-container *ngIf="column!==\'buttons\';else test">\n          <td mat-cell *matCellDef="let row"> <span>{{getField(row,column)|general:columnPipes[id]}}</span></td>\n        </ng-container>\n        <ng-template #test>\n          <td mat-cell *matCellDef="let row">\n            <div class="buttons-panel" [ngStyle]="{\'width\': (buttons.length*20)+\'px\'}">\n              <ng-container *ngFor="let button of buttons;let i=index">\n                <tims-button [buttonAction]="button!==\'delete\'? buttonActions[i]: removeElement" [targetElement]="row"\n                  [buttonType]="button"></tims-button>\n              </ng-container>\n            </div>\n          </td>\n        </ng-template>\n      </ng-container>\n\n      <ng-container matColumnDef="expandedDetail">\n        <td mat-cell *matCellDef="let row" [attr.colspan]="columnIds.length">\n          <div class="example-element-detail" [@detailExpand]="row == expandedElement ? \'expanded\' : \'collapsed\'">\n            \x3c!-- <div class="example-element-diagram"> --\x3e\n            \x3c!-- <div class="example-element-position"> {{row.body}} </div> --\x3e\n            \x3c!-- <div class="example-element-symbol"> nesto </div>\n              \x3c!-- <div class="example-element-name"> nesto </div> --\x3e\n            \x3c!-- <div class="example-element-weight"> {{row.body}} </div> --\x3e\n            \x3c!-- </div> --\x3e\n            <div class="example-element-description">\n              {{row.body}}\n              <span class="example-element-description-attribution"> -- Izvor neki </span>\n            </div>\n          </div>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef="columnIds"></tr>\n      <tr mat-row *matRowDef="let row; columns: columnIds;" class="example-element-row" [class.example-expanded-row]="expandedElement === row"\n        (click)="toggleExpand(row)">\n      </tr>\n      <ng-container *ngIf="displayDetails">\n        <tr mat-row *matRowDef="let row; columns: [\'expandedDetail\']" class="example-detail-row"></tr>\n      </ng-container>\n    </table>\n  </div>\n\n  <mat-paginator [length]="resultsLength" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="20"></mat-paginator>\n</div>\n',styles:["table{width:100%}tr.example-detail-row{height:0}.buttons-panel{display:inline-flex;flex-direction:row}tr.example-element-row:not(.example-expanded-row):hover{background:#f5f5f5}tr.example-element-row:not(.example-expanded-row):active{background:#efefef}.example-element-row td{border-bottom-width:0}.example-element-detail{overflow:hidden;display:flex}.example-element-diagram{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol{font-weight:700;font-size:40px;line-height:normal}.example-element-description{padding:16px}.example-element-description-attribution{opacity:.5}.example-container{position:relative;width:100%}.example-loading-shade{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached{color:#980000;max-width:360px;text-align:center}"],animations:[t.trigger("detailExpand",[t.state("collapsed",t.style({height:"0px",minHeight:"0",display:"none"})),t.state("expanded",t.style({height:"*"})),t.transition("expanded <=> collapsed",t.animate("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}]}],e.ctorParameters=function(){return[]},e.propDecorators={paginator:[{type:n.ViewChild,args:[a.MatPaginator]}],sort:[{type:n.ViewChild,args:[a.MatSort]}],sortable:[{type:n.Input}],dataProvider:[{type:n.Input}],columnIds:[{type:n.Input}],columnNames:[{type:n.Input}],columnPipes:[{type:n.Input}],buttons:[{type:n.Input}],buttonActions:[{type:n.Input}],displayDetails:[{type:n.Input}]},e}(),x=function(){function e(){}return e.prototype.transform=function(t,e){return e&&(s.isArray(e)?e.forEach(function(e){t=e.transform(t)}):t=e.transform(t)),t},e.decorators=[{type:n.Pipe,args:[{name:"general"}]}],e}(),y=new n.InjectionToken("GridConfig"),v=function(){function e(e){this.config=e,console.log("GridConfigService",e),this.config.buttons&&(this.buttons=this.config.buttons)}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[y]}]}]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e(n.inject(y))},token:e,providedIn:"root"}),e}(),w=function(){function e(e){var n=this;this.gridServ=e,this.concreteButtonAction=function(e,t){n.buttonAction&&(t.stopPropagation(),n.buttonAction(e))}}return e.prototype.ngOnInit=function(){this.buttonType&&(this.buttonDef=this.gridServ.buttons.get(this.buttonType))},e.decorators=[{type:n.Component,args:[{selector:"tims-button",template:'<div  class="button-container" (click)="concreteButtonAction(targetElement,$event)">\n  <fa [matTooltip]="buttonDef.text" [name]="buttonDef.icon" [animation]="buttonDef.animation"></fa>\n</div>\n',styles:[".button-container{cursor:pointer;color:#5454c7;margin:4px;line-height:100%;flex:1}.button-container:hover{color:orange}"]}]}],e.ctorParameters=function(){return[{type:v}]},e.propDecorators={buttonType:[{type:n.Input}],targetElement:[{type:n.Input}],buttonAction:[{type:n.Input}]},e}(),M=function(){function t(){}return t.setConfig=function(e){return{ngModule:t,providers:[v,{provide:y,useValue:e}]}},t.decorators=[{type:n.NgModule,args:[{imports:[u.CommonModule,p.AngularFontAwesomeModule,d.CdkTableModule,a.MatTableModule,a.MatPaginatorModule,m.BrowserAnimationsModule,a.MatTooltipModule,c.FormsModule,c.ReactiveFormsModule,o.HttpClientModule,a.MatCardModule,a.MatProgressSpinnerModule,a.MatMenuModule,a.MatIconModule,a.MatToolbarModule,a.MatButtonModule,a.MatFormFieldModule,a.MatInputModule,a.MatSelectModule,a.MatSortModule,a.MatTableModule,c.FormsModule,c.ReactiveFormsModule],declarations:[b,x,w],exports:[b],providers:[v]}]}],t}(),I=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[M],declarations:[f],exports:[M,f]}]}],e}();e.TimsystemsLibService=g,e.TimsystemsLibComponent=f,e.TimsystemsLibModule=I,e.TimsGridModule=M,e.TimsGridComponent=b,e.ɵd=y,e.ɵb=w,e.ɵa=x,e.ɵc=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=timsystems-lib.umd.min.js.map