{"version":3,"file":"timsystems-lib.js.map","sources":["ng://timsystems-lib/lib/timsystems-lib.service.ts","ng://timsystems-lib/lib/timsystems-lib.component.ts","ng://timsystems-lib/lib/tims-grid/tims-grid.component.ts","ng://timsystems-lib/lib/tims-grid/general.pipe.ts","ng://timsystems-lib/lib/tims-grid/button.ts","ng://timsystems-lib/lib/tims-grid/button/button.component.ts","ng://timsystems-lib/lib/tims-grid/tims-grid.module.ts","ng://timsystems-lib/lib/timsystems-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TimsystemsLibService {\n  constructor(private http: HttpClient) {}\n\n  getRepoIssues = (\n    sort: string,\n    order: string,\n    page: number\n  ): Observable<GithubApi> => {\n    const href = 'https://api.github.com/search/issues';\n    const requestUrl = `${href}?q=repo:angular/material2&sort=${sort}&order=${order}&page=${page +\n      1}`;\n\n    return this.http.get<GithubApi>(requestUrl);\n  }\n}\nexport interface GithubApi {\n  items: GithubIssue[];\n  total_count: number;\n}\n\nexport interface GithubIssue {\n  created_at: string;\n  number: string;\n  state: string;\n  title: string;\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'tims-timsystems-lib',\n  template: `\n    <p>\n      timsystems-lib works!\n    </p>\n  `,\n  styles: []\n})\nexport class TimsystemsLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import {\n  Component,\n  OnInit,\n  ViewChild,\n  Input,\n  PipeTransform\n} from '@angular/core';\nimport {\n  animate,\n  state,\n  style,\n  transition,\n  trigger\n} from '@angular/animations';\nimport { MatPaginator, MatSort } from '@angular/material';\nimport { merge, Observable, of as observableOf } from 'rxjs';\nimport { catchError, map, startWith, switchMap } from 'rxjs/operators';\nimport * as _ from 'lodash';\n\nconst lod = _;\n@Component({\n  selector: 'tims-tims-grid',\n  template: `<div class=\"example-container mat-elevation-z8\">\n  <div class=\"example-loading-shade\" *ngIf=\"isLoadingResults || isRateLimitReached\">\n    <mat-spinner *ngIf=\"isLoadingResults\"></mat-spinner>\n    <div class=\"example-rate-limit-reached\" *ngIf=\"isRateLimitReached\">\n      DoÅ¡lo je do greÅ¡ke, molimo proverite vaÅ¡u internet konekciju\n    </div>\n  </div>\n\n  <div class=\"example-table-container\">\n\n    <table mat-table [dataSource]=\"data\" class=\"example-table\" matSort multiTemplateDataRows matSortDisableClear\n      matSortDirection=\"asc\">\n\n\n      <ng-container matColumnDef=\"{{column}}\" *ngFor=\"let column of columnIds; let id=index\">\n        <ng-container *ngIf=\"sortable;else nosort\">\n          <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear> {{columnNames[id]}} </th>\n        </ng-container>\n        <ng-template #nosort>\n          <th mat-header-cell *matHeaderCellDef> {{columnNames[id]}} </th>\n        </ng-template>\n        <ng-container *ngIf=\"column!=='buttons';else test\">\n          <td mat-cell *matCellDef=\"let row\"> <span>{{getField(row,column)|general:columnPipes[id]}}</span></td>\n        </ng-container>\n        <ng-template #test>\n          <td mat-cell *matCellDef=\"let row\">\n            <div class=\"buttons-panel\" [ngStyle]=\"{'width': (buttons.length*20)+'px'}\">\n              <ng-container *ngFor=\"let button of buttons;let i=index\">\n                <tims-button [buttonAction]=\"button!=='delete'? buttonActions[i]: removeElement\" [targetElement]=\"row\"\n                  [buttonType]=\"button\"></tims-button>\n              </ng-container>\n            </div>\n          </td>\n        </ng-template>\n      </ng-container>\n\n      <ng-container matColumnDef=\"expandedDetail\">\n        <td mat-cell *matCellDef=\"let row\" [attr.colspan]=\"columnIds.length\">\n          <div class=\"example-element-detail\" [@detailExpand]=\"row == expandedElement ? 'expanded' : 'collapsed'\">\n            <!-- <div class=\"example-element-diagram\"> -->\n            <!-- <div class=\"example-element-position\"> {{row.body}} </div> -->\n            <!-- <div class=\"example-element-symbol\"> nesto </div>\n              <!-- <div class=\"example-element-name\"> nesto </div> -->\n            <!-- <div class=\"example-element-weight\"> {{row.body}} </div> -->\n            <!-- </div> -->\n            <div class=\"example-element-description\">\n              {{row.body}}\n              <span class=\"example-element-description-attribution\"> -- Izvor neki </span>\n            </div>\n          </div>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef=\"columnIds\"></tr>\n      <tr mat-row *matRowDef=\"let row; columns: columnIds;\" class=\"example-element-row\" [class.example-expanded-row]=\"expandedElement === row\"\n        (click)=\"toggleExpand(row)\">\n      </tr>\n      <ng-container *ngIf=\"displayDetails\">\n        <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"example-detail-row\"></tr>\n      </ng-container>\n    </table>\n  </div>\n\n  <mat-paginator [length]=\"resultsLength\" [pageSizeOptions]=\"[10, 20, 50, 100]\" [pageSize]=\"20\"></mat-paginator>\n</div>\n`,\n  styles: [`table{width:100%}tr.example-detail-row{height:0}.buttons-panel{display:inline-flex;flex-direction:row}tr.example-element-row:not(.example-expanded-row):hover{background:#f5f5f5}tr.example-element-row:not(.example-expanded-row):active{background:#efefef}.example-element-row td{border-bottom-width:0}.example-element-detail{overflow:hidden;display:flex}.example-element-diagram{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol{font-weight:700;font-size:40px;line-height:normal}.example-element-description{padding:16px}.example-element-description-attribution{opacity:.5}.example-container{position:relative;width:100%}.example-loading-shade{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached{color:#980000;max-width:360px;text-align:center}`],\n  animations: [\n    trigger('detailExpand', [\n      state(\n        'collapsed',\n        style({ height: '0px', minHeight: '0', display: 'none' })\n      ),\n      state('expanded', style({ height: '*' })),\n      transition(\n        'expanded <=> collapsed',\n        animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')\n      )\n    ])\n  ]\n})\nexport class TimsGridComponent implements OnInit {\n  @ViewChild(MatPaginator)\n  paginator: MatPaginator;\n\n  @ViewChild(MatSort)\n  sort: MatSort;\n\n  @Input()\n  sortable: boolean;\n\n  @Input()\n  dataProvider: Function;\n\n  @Input()\n  columnIds: string[];\n\n  @Input()\n  columnNames: string[];\n\n  @Input()\n  columnPipes: PipeTransform[];\n\n  @Input()\n  buttons: string[];\n\n  @Input()\n  buttonActions: Function[];\n\n  @Input()\n  displayDetails = false;\n\n  resultsLength = 0;\n  isLoadingResults = true;\n  isRateLimitReached = false;\n  expandedElement: any;\n  data: any[];\n  constructor() {}\n\n  getField = (source, fieldPath: string) => lod.get(source, fieldPath, '');\n\n  ngOnInit() {\n    if (this.buttons && this.buttons.length > 0) {\n      this.columnIds.push('buttons');\n    }\n    // If the user changes the sort order, reset back to the first page.\n    this.sort.sortChange.subscribe(() => (this.paginator.pageIndex = 0));\n\n    merge(this.sort.sortChange, this.paginator.page)\n      .pipe(\n        startWith({}),\n        switchMap(() => {\n          this.isLoadingResults = true;\n          return <Observable<any>>(\n            this.dataProvider(\n              this.sort.active,\n              this.sort.direction,\n              this.paginator.pageIndex,\n              this.paginator.pageSize\n            )\n          );\n        }),\n        map(data => {\n          // Flip flag to show that loading has finished.\n          this.isLoadingResults = false;\n          this.isRateLimitReached = false;\n          this.resultsLength = data.total_count;\n          console.log(data);\n          return data.items;\n        }),\n        catchError(() => {\n          this.isLoadingResults = false;\n          // Catch if the GitHub API has reached its rate limit. Return empty data.\n          this.isRateLimitReached = true;\n          return observableOf([]);\n        })\n      )\n      .subscribe(data => (this.data = data));\n  }\n\n  removeElement = elementToDelete => {\n    this.data = this.data.filter(elem => elem !== elementToDelete);\n  }\n\n  toggleExpand = clickedElement =>\n    (this.expandedElement =\n      !this.expandedElement || this.expandedElement !== clickedElement\n        ? clickedElement\n        : null)\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { isArray } from 'util';\n\n@Pipe({\n  name: 'general'\n})\nexport class GeneralPipe implements PipeTransform {\n  transform(value: any, args?: any): any {\n    if (!args) {\n      return value;\n    }\n    if (isArray(args)) {\n      args.forEach(pipe => {\n        value = (<PipeTransform>pipe).transform(value);\n      });\n    } else {\n      value = (<PipeTransform>args).transform(value);\n    }\n    return value;\n  }\n}\n","export default class Button {\r\n  text: string;\r\n  icon: string;\r\n  animation?: string;\r\n  alternateIcon?: string;\r\n  constructor(\r\n    text: string,\r\n    icon: string,\r\n    alternateIcon?: string,\r\n    animation?: string\r\n  ) {\r\n    this.text = text;\r\n    this.icon = icon;\r\n    this.alternateIcon = alternateIcon ? alternateIcon : null;\r\n    this.animation = animation;\r\n  }\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\nimport Button from '../button';\n\n@Component({\n  selector: 'tims-button',\n  template: `<div matTooltip=\"Info about the action\" class=\"button-container\" (click)=\"concreteButtonAction(targetElement,$event)\">\n  <fa [name]=\"buttonDef.icon\" [animation]=\"buttonDef.animation\"></fa>\n</div>\n`,\n  styles: [`.button-container{cursor:pointer;color:#5454c7;margin:4px;line-height:100%;flex:1}.button-container:hover{color:orange}`]\n})\nexport class ButtonComponent implements OnInit {\n  @Input()\n  buttonType: string;\n\n  @Input()\n  targetElement;\n\n  @Input()\n  buttonAction: Function;\n\n  buttonDef: Button;\n  constructor() {}\n\n  ngOnInit() {\n    if (this.buttonType) {\n      this.buttonDef = buttons.get(this.buttonType);\n    }\n  }\n\n  concreteButtonAction = (targetElement, event: MouseEvent) => {\n    event.stopPropagation();\n    this.buttonAction(targetElement);\n  }\n}\n\nconst buttons: Map<string, Button> = new Map([\n  ['edit', new Button('Izmeni', 'pencil-square-o')],\n  ['delete', new Button('ObriÅ¡i', 'trash-o')],\n  ['view', new Button('Detalji', 'address-card-o')],\n  ['save', new Button('SaÄuvaj', 'floppy-o')]\n]);\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TimsGridComponent } from './tims-grid.component';\nimport { CdkTableModule } from '@angular/cdk/table';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport {\n  MatButtonModule,\n  MatCardModule,\n  MatIconModule,\n  MatInputModule,\n  MatMenuModule,\n  MatProgressSpinnerModule,\n  MatSelectModule,\n  MatSortModule,\n  MatTableModule,\n  MatToolbarModule,\n  MatFormFieldModule,\n  MatPaginatorModule\n} from '@angular/material';\nimport { GeneralPipe } from './general.pipe';\nimport { ButtonComponent } from './button/button.component';\nimport { AngularFontAwesomeModule } from 'angular-font-awesome';\n@NgModule({\n  imports: [\n    CommonModule,\n    AngularFontAwesomeModule,\n    CdkTableModule,\n    MatTableModule,\n    MatPaginatorModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    MatCardModule,\n    MatProgressSpinnerModule,\n    MatMenuModule,\n    MatIconModule,\n    MatToolbarModule,\n    MatButtonModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatSelectModule,\n    MatSortModule,\n    MatTableModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [TimsGridComponent, GeneralPipe, ButtonComponent],\n  exports: [TimsGridComponent]\n})\nexport class TimsGridModule {}\n","import { NgModule } from '@angular/core';\nimport { TimsystemsLibComponent } from './timsystems-lib.component';\nimport { TimsGridModule } from './tims-grid/tims-grid.module';\n\n@NgModule({\n  imports: [TimsGridModule],\n  declarations: [TimsystemsLibComponent],\n  exports: [TimsGridModule, TimsystemsLibComponent]\n})\nexport class TimsystemsLibModule {}\n"],"names":["observableOf"],"mappings":"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"}
